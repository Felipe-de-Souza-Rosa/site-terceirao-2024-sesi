<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Terceirão Sesi 2024</title>
    <link rel="shortcut icon" type="image/png" href="/imagens/user icon branco.png">
    <link rel="stylesheet" href="style.css">
</head>

<body style="background-image: 0%;">
    <header class="header">
        <div class="header-content">
            <div class="terceiro_logo">
                <img src="imagens/LOGO PNG TERCEIRO.png" alt="Terceirão Sesi 2024 " width="100%" height="200">
            </div>
            <nav class="nav">
                <h2><a class="nav"></a></h2>
                <h2><a class="nav" href="index.html">Blog</a></h2>
                <h2><a class="nav" href="SOBRE3.html">Sobre</a></h2>
                <h2><a class="nav" href="FOTOS3.html">Fotos</a></h2>
                <h2><a class="nav" href="EVENTOS3.html">Eventos</a></h2>
                <h2><a class="nav" href="LOJA3.html">Loja</a></h2>
                <input type="text" style="width: 200px; padding: 0px; padding-right: none;" placeholder="Pesquisar">
            </nav>
            <img src="imagens/user icon branco.png" width="70px" height="50px">
            <div class="loginbrabo">
                <button onclick="document.getElementById('id01').style.display='block'" style="width:auto;"
                    class="loginbtn">Login</button>
            </div>
            <div id="id01" class="modallogin">
                <form class="modal-contentlogin animate" action="/action_page.php" method="post">
                    <div class="imgcontainerlogin">

                    </div>

                    <div class="containerlogin">
                        <label for="uname"><b>Username</b></label>
                        <input type="text" placeholder="Enter Username" name="uname" required>

                        <label for="psw"><b>Password</b></label>
                        <input type="password" placeholder="Enter Password" name="psw" required>

                        <button type="submit" class="loginbtn" onclick="Login(event)">Login</button>
                        <label>
                            <input type="checkbox" checked="checked" name="remember"> Remember me
                        </label>
                    </div>

                    <div class="containerlogin" style="background-color:#f1f1f1">
                        <button type="button" onclick="document.getElementById('id01').style.display='none'"
                            class="cancelbtnlogin">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </header>
    <main class="main">
        <section id="inicial" class="section">
            <div class="section-content">
                <div class="headersobre" style="background-color: rgb(104, 8, 8);">
                    <h1 class="titlemax" style="font-size: 70px;">POST'S DO BLOG</h1>

                </div>
            </div>
            <section id="inicial" class="section"></section>
            <section id="inicial" class="section"></section>
            </div>
            </div>
            <section id="inicial" class="section"></section>
            <center> <button class="button-34" id="createPostBtn" role="button">Create Post</button> </center>
            <main class="post-container">
                <div id="createPostModal" class="modal">
                    <div class="modal-content">
                        <span class="close" id="closeModal">×</span>
                        <h2>Create a New Post</h2>
                        <form id="postForm">
                            <div class="upper">
                                <div class="title">
                                    <label class="postheading" for="postTitle">
                                        Title
                                    </label>
                                    <input type="text" class="postTitle" id="postTitle" name="postTitle"
                                        autocomplete="off" required>
                                </div>
                                <div class="category1">
                                    <label class="postheading" for="postCategory">
                                        Category
                                    </label>
                                    <input type="text" class="postCategory" id="postCategory" name="postCategory"
                                        autocomplete="off" required>
                                </div>
                            </div>

                            <label class="postheading" for="postDescription">
                                Description
                            </label>
                            <textarea class="postDescription" id="postDescription" name="postDescription"
                                autocomplete="off" required>
                                  </textarea>

                            <button type="submit" id="postSubmitBtn" class="postSubmitBtn">Post</button>
                        </form>
                    </div>
                </div>

                <!-- Detail Modal -->
                <div id="postDetailModal" class="modal">
                    <div class="modal-content">
                        <span class="close" id="closeDetailModal">
                            ×
                        </span>
                        <h1 id="detailTitle"></h1>
                        <span id="detailDate"></span>
                        <p id="detailDescription"></p>
                    </div>
                </div>

                <div id="postCreatedMessage" class="post-message">
                    Post created successfully!
                </div>

            </main>
            <div id="postList"></div>
            <section id="inicial" class="section"></section>
            <section id="inicial" class="section"></section>
            <form action="submit-form.php" method="posts" style="align-items: center;">
                <label for="namecomment">Nome:</label>
                <input type="textname" id="name" name="name" required>
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>
                <label for="message">Mensagem:</label>
                <textarea id="message" name="message" rows="5" cols="30" required></textarea>
                <button type="submit" class="button">Enviar</button>
            </form>
            </div>
        </section>
    </main>
    <footer class="footer">
        <h2 class="cardfront">&copy; 2024 Terceirão Sesi. Todos os direitos reservados.</p>
    </footer>
    <script>

        document.addEventListener('DOMContentLoaded', function () {
            const createPostBtn =
                document.getElementById('createPostBtn');
            const createPostModal =
                document.getElementById('createPostModal');
            const closeModal =
                document.getElementById('closeModal');
            const postForm =
                document.getElementById('postForm');
            const postSubmitBtn =
                document.getElementById('postSubmitBtn');
            const postContainer =
                document.querySelector('.post-container');
            const postDetailModal =
                document.getElementById('postDetailModal');
            const closeDetailModal =
                document.getElementById('closeDetailModal');
            const detailTitle =
                document.getElementById('detailTitle');
            const detailDate =
                document.getElementById('detailDate');
            const detailDescription =
                document.getElementById('detailDescription');

            createPostBtn.addEventListener('click', function () {
                createPostModal.style.display = 'flex';
            });
            closeModal.addEventListener('click', function () {
                // Add fadeOut class 
                createPostModal.classList.add('fadeOut');
                setTimeout(() => {
                    createPostModal.style.display = 'none';
                    // Remove fadeOut class 
                    createPostModal.classList.remove('fadeOut');
                }, 500);
            });

            postForm.addEventListener('submit', function (event) {
                event.preventDefault();

                // Validation 
                const postCategory =
                    document.getElementById('postCategory').value;
                const postTitle =
                    document.getElementById('postTitle').value;
                const postDescription =
                    document.getElementById('postDescription').value;

                if (postCategory.trim() === '' ||
                    postTitle.trim() === '' ||
                    postDescription.trim() === '') {
                    alert('Please fill out all fields.');
                    return;
                }

                // Get the current date 
                const currentDate = new Date();
                const day = currentDate.getDate();
                const month = currentDate.toLocaleString('default',
                    { month: 'short' });
                const year = currentDate.getFullYear();
                const formattedDate = day + ' ' + month + ' ' + year;

                // Create a new post element 
                const newPost = document.createElement('div');
                newPost.className = 'post-box';
                newPost.innerHTML = ` 
            <h1 class="post-title" data-title="${postTitle}"
         data-date="${formattedDate}"
          data-description="${postDescription}"> 
            ${postTitle}</h1><br> 
              
        <h2 class="category">${postCategory}</h2><br> 
        <span class="post-date">${formattedDate}</span> 
        <p class="post-description"> 
        ${postDescription.substring(0, 100)}...</p> 
        <button class="delete-post" data-title="${postTitle}"> 
        Delete</button> 
        <span class="load-more" data-title="${postTitle}" 
        data-date="${formattedDate}" 
        data-description="${postDescription}"> 
        Load more</span> 
        `;

                // Append the new post to the post container 
                postContainer.insertBefore(newPost,
                    postContainer.firstChild);

                const postCreatedMessage = document
                    .getElementById('postCreatedMessage');
                postCreatedMessage.style.display = 'block';


                // Close the modal 
                createPostModal.style.display = 'none';

                // Reset the form 
                postForm.reset();

                setTimeout(() => {
                    postCreatedMessage.style.display = 'none';
                }, 3000);
            });
            createPostBtn.addEventListener('click', () => {
                document.getElementById('createPostModal').style.display = 'block';
            });

            closeModal.addEventListener('click', () => {
                document.getElementById('createPostModal').style.display = 'none';
            });

            window.addEventListener('click', (event) => {
                if (event.target == document.getElementById('createPostModal')) {
                    document.getElementById('createPostModal').style.display = 'none';
                }
            });

            postForm.addEventListener('submit', (event) => {
                event.preventDefault();
                if (!postTitle.value || !postCategory.value || !postDescription.value) {
                    return;
                }

                const post = document.createElement('div');
                post.classList.add('post');
                post.innerHTML = `
                    <div class="title">${postTitle.value}</div>
                    <div class="category">${postCategory.value}</div>
                    <div class="description">${postDescription.value}</div>
                `;
                postList.appendChild(postdiv
                );

                document.getElementById('createPostModal').style.display = 'none';
                postCreatedMessage.style.display = 'block';

                // Save the post in the local storage
                const posts = JSON.parse(localStorage.getItem('posts')) || [];
                posts.push({
                    title: postTitle.value,
                    category: postCategory.value,
                    description: postDescription.value
                });
                localStorage.setItem('posts', JSON.stringify(posts));


                // Load posts from the local storage
                const savedPosts = JSON.parse(localStorage.getItem('posts'));
                if (savedPosts) {
                    savedPosts.forEach(post => {
                        const postEl = document.createElement('div');
                        postEl.classList.add('post');
                        postEl.innerHTML = `
                        <div class="title">${post.title}</div>
                        <div class="category">${post.category}</div>
                        <div class="description">${post.description}</div>
                    `;
                        postList.appendChild(postEl);
                    });
                }
            });
            postContainer.addEventListener('click', function (event) {
                if (event.target.classList.contains('load-more') ||
                    event.target.classList.contains('post-title')) {
                    const title = event.target.getAttribute('data-title');
                    const date = event.target.getAttribute('data-date');
                    const description =
                        event.target.getAttribute('data-description');

                    // Set content in detail modal 
                    detailTitle.textContent = title;
                    detailDate.textContent = date;
                    detailDescription.textContent = description;

                    // Display the detail modal 
                    postDetailModal.style.display = 'flex';
                }

                if (event.target.classList.contains('delete-post')) {
                    const titleToDelete =
                        event.target.getAttribute('data-title');
                    const postToDelete =
                        document.querySelector(` 
            .post-title[data-title= 
                "${titleToDelete}"]`).closest('.post-box');

                    // Add fadeOut class to initiate the animation 
                    postToDelete.classList.add('fadeOut');

                    // Remove the post after the animation completes 
                    setTimeout(() => {
                        postContainer.removeChild(postToDelete);
                    }, 500);

                }
            });

            closeDetailModal.addEventListener('click', function () {

                // Add fadeOut class 
                postDetailModal.classList.add('fadeOut');
                setTimeout(() => {
                    postDetailModal.style.display = 'none';

                    // Remove fadeOut class 
                    postDetailModal.classList.remove('fadeOut');
                }, 500);

            });
        });

        function Login(event) {
            event.preventDefault();
            var usuario = document.getElementsByName('uname')[0].value;
            usuario = usuario.toLowerCase();
            var senha = document.getElementsByName('psw')[0].value;
            senha = senha.toLowerCase();

            if (usuario == "admin" && senha == "admin123") {
                alert("Dados corretos");
                window.location = "HOMEADMS.html";
            }
            else {
                alert("Dados incorretos, tente novamente");
            }
        }

    </script>

</html>